<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Annotation Tables – MICrONs Tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-9eb995e8644016eb670a0cb3bf478a26.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Annotation Tables – MICrONs Tutorial">
<meta property="og:description" content="">
<meta property="og:site_name" content="MICrONs Tutorial">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MICrONs Tutorial</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./introduction.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.microns-explorer.org/"> 
<span class="menu-text">Microns Explorer</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/AllenInstitute/microns_tutorial/discussions" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-chat-left-text-fill"></i></a>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/AllenInstitute/microns_tutorial">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/AllenInstitute/microns_tutorial/issues">
            Report a Bug
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Data Inventory</li><li class="breadcrumb-item"><a href="./annotation-tables.html">Annotation Tables</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Background</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dataset-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dataset Basics</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Versioning and Data Quality</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./proofreading.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Proofreading and Data Quality</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Online Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./neuroglancer-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Neuroglancer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dash-table-viewer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dash Apps: Table Viewer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dash-connectivity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dash Apps: Connectivity Viewer</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Python Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/01-caveclient-setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CAVEclient Setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/02-cave-query-cell-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CAVE Query: Cell Types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/03-cave-query-proofread-cells.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CAVE Query: Proofread Cells</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/04-cave-query-synapses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CAVE Query: Synaptic Connectivity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/05-cloudvolume-download.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Download Imagery and Segmentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/06-cloudvolume-download-mesh.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Download Meshes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/07-cave-download-skeleton.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Download Skeletons</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/08-standard-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Standard Transform: Coordinate System</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quickstart_notebooks/09-nglui-neuroglancer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NGLui: Neuroglancer States</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Data Inventory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Release Manifests</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release_manifests/version-1300.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1300 (Jan 2025)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release_manifests/version-1181.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1181 (Sep 2024)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release_manifests/version-1078.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1078 (Jun 2024)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release_manifests/version-943.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">943 (Jan 2024)</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./annotation-tables.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Annotation Tables</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#common-fields" id="toc-common-fields" class="nav-link active" data-scroll-target="#common-fields">Common Fields</a>
  <ul class="collapse">
  <li><a href="#spatial-point-columns" id="toc-spatial-point-columns" class="nav-link" data-scroll-target="#spatial-point-columns">Spatial Point Columns</a></li>
  <li><a href="#book-keeping-columns" id="toc-book-keeping-columns" class="nav-link" data-scroll-target="#book-keeping-columns">Book-keeping Columns</a></li>
  </ul></li>
  <li><a href="#synapse-table" id="toc-synapse-table" class="nav-link" data-scroll-target="#synapse-table">Synapse Table</a></li>
  <li><a href="#nucleus-tables" id="toc-nucleus-tables" class="nav-link" data-scroll-target="#nucleus-tables">Nucleus tables</a>
  <ul class="collapse">
  <li><a href="#nucleus-detection-table" id="toc-nucleus-detection-table" class="nav-link" data-scroll-target="#nucleus-detection-table">Nucleus Detection Table</a></li>
  <li><a href="#nucleus-brain-area-assignment" id="toc-nucleus-brain-area-assignment" class="nav-link" data-scroll-target="#nucleus-brain-area-assignment">Nucleus brain area assignment</a></li>
  </ul></li>
  <li><a href="#cell-type-tables" id="toc-cell-type-tables" class="nav-link" data-scroll-target="#cell-type-tables">Cell Type Tables</a>
  <ul class="collapse">
  <li><a href="#manual-cell-types-v1-column" id="toc-manual-cell-types-v1-column" class="nav-link" data-scroll-target="#manual-cell-types-v1-column">Manual Cell Types (V1 Column)</a></li>
  <li><a href="#predictions-from-somanucleus-features" id="toc-predictions-from-somanucleus-features" class="nav-link" data-scroll-target="#predictions-from-somanucleus-features">Predictions from soma/nucleus features</a></li>
  <li><a href="#coarse-prediction-from-spine-detection" id="toc-coarse-prediction-from-spine-detection" class="nav-link" data-scroll-target="#coarse-prediction-from-spine-detection">Coarse prediction from spine detection</a></li>
  <li><a href="#fine-prediction-from-dendritic-features" id="toc-fine-prediction-from-dendritic-features" class="nav-link" data-scroll-target="#fine-prediction-from-dendritic-features">Fine prediction from dendritic features</a></li>
  </ul></li>
  <li><a href="#proofreading-tables" id="toc-proofreading-tables" class="nav-link" data-scroll-target="#proofreading-tables">Proofreading Tables</a>
  <ul class="collapse">
  <li><a href="#proofreading-status-and-strategy" id="toc-proofreading-status-and-strategy" class="nav-link" data-scroll-target="#proofreading-status-and-strategy">Proofreading Status and Strategy</a></li>
  </ul></li>
  <li><a href="#functional-coregistration-tables" id="toc-functional-coregistration-tables" class="nav-link" data-scroll-target="#functional-coregistration-tables">Functional Coregistration Tables</a>
  <ul class="collapse">
  <li><a href="#manual-coregistration" id="toc-manual-coregistration" class="nav-link" data-scroll-target="#manual-coregistration">Manual coregistration</a></li>
  <li><a href="#automated-coregistration" id="toc-automated-coregistration" class="nav-link" data-scroll-target="#automated-coregistration">Automated coregistration</a></li>
  <li><a href="#functional-properties" id="toc-functional-properties" class="nav-link" data-scroll-target="#functional-properties">Functional properties</a></li>
  </ul></li>
  <li><a href="#overview-of-relevant-tables" id="toc-overview-of-relevant-tables" class="nav-link" data-scroll-target="#overview-of-relevant-tables">Overview of relevant tables</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.dev/AllenInstitute/microns_tutorial/blob/main/tutorial_book/annotation-tables.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/AllenInstitute/microns_tutorial/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Data Inventory</li><li class="breadcrumb-item"><a href="./annotation-tables.html">Annotation Tables</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Annotation Tables</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The <code>minnie65_public</code> data release includes a number of annotation tables that help label the dataset. This section describes the content of each of these tables — <a href=".\quickstart_notebooks/em_py_02_cave_quickstart.html">see here for instructions for how to query and filter tables</a>.</p>
<p>Unless otherwise specificied (i.e.&nbsp;via <code>desired_resolution</code>), all positions are in units of 4,4,40 nm/voxel resolution.</p>
<section id="common-fields" class="level2">
<h2 class="anchored" data-anchor-id="common-fields">Common Fields</h2>
<p>Several fields (or column names) are common to many tables. These fall into two main classes: the spatial point columns that are how we assign annotations to cells via points in the 3d space and book-keeping columns, that are used internally to track the state of the data.</p>
<section id="spatial-point-columns" class="level3">
<h3 class="anchored" data-anchor-id="spatial-point-columns">Spatial Point Columns</h3>
<p>Most tables have one or more <strong>Bound Spatial Points</strong>, which is a location in the 3d space that tells the annotation to remain associated with the root id at that location.</p>
<p>Bound spatial points have will have one prefix, usually <code>pt</code> (i.e.&nbsp;“point”) and three associated columns with different suffixes: <code>_position</code>, <code>_supervoxel_id</code>, and <code>_root_id</code>.</p>
<p>For a given prefix <code>{pt}</code>, the three columns are as follows:</p>
<ul>
<li>The <code>{pt}_position</code> indicates the location of the point in 3d space.</li>
<li>The <code>{pt}_supervoxel_id</code> indicates a unique identifier in the segmentation, and is mostly internal bookkeeping.</li>
<li>The <code>{pt}_root_id</code> indicates the root id of the annotation at that location.</li>
</ul>
</section>
<section id="book-keeping-columns" class="level3">
<h3 class="anchored" data-anchor-id="book-keeping-columns">Book-keeping Columns</h3>
<p>Several columns are common to many or all tables, and mostly used as internal book-keeping. Rather than describe these for every table, they will just be mentioned briefly here:</p>
<table class="table-light table-hover caption-top table">
<caption>Common columns</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">A unique ID specific to the annotation within that table</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>created</code></td>
<td style="text-align: left;">Internal bookkeeping column, should always be <code>t</code> for data you can download</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>valid</code></td>
<td style="text-align: left;">A unique ID specific to the annotation within that table</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>target_id</code></td>
<td style="text-align: left;">Some tables reference other tables, particularly the nucleus table. If present, this column will be the same as <code>id</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>created_ref</code> / <code>valid_ref</code> / <code>id_ref</code> (optional)</td>
<td style="text-align: left;">For reference tables, the data shows both the created/valid/id of the reference annotation and the target annotation. The values with the <code>_ref</code> suffix are those of the reference table (usually something like proofreading state or cell type) and the values without a suffix ar ethose of the target table (usually a nucleus)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="synapse-table" class="level2">
<h2 class="anchored" data-anchor-id="synapse-table">Synapse Table</h2>
<p>Table name: <code>synapses_pni_v2</code></p>
<p>The only synapse table is <code>synapses_pni_v2</code>. This is by far the largest table in the dataset with 337 million entries, one for each synapse. It contains the following columns:</p>
<table class="table-light table-hover caption-top table">
<caption>Synapse table column definitions</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>pre_pt_position</code> / <code>pre_pt_supervoxel_id</code> / <code>pre_pt_root_id</code></td>
<td style="text-align: left;">The bound spatial point data for the presynaptic side of the synapse.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>post_pt_position</code> / <code>post_pt_supervoxel_id</code> / <code>post_pt_root_id</code></td>
<td style="text-align: left;">IThe bound spatial point data for the postsynaptic side of the synapse.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>size</code></td>
<td style="text-align: left;">The size of the synapse in voxels. This correlates well, but not perfectly, with the surface area of synapse.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>ctr_pt_position</code></td>
<td style="text-align: left;">A position in the center of the detected synaptic junction. Of all points in the synapse table, this is usually the closest point to the surface (and thus mesh) of both neurons. Because it is at the edge of cells, it is not associated with a root id.</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Synapse query: outputs</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>client.materialize.synapse_query(pre_ids<span class="op">=</span>example_root_id)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Synapse query: inputs</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>client.materialize.synapse_query(post_ids<span class="op">=</span>example_root_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="nucleus-tables" class="level2">
<h2 class="anchored" data-anchor-id="nucleus-tables">Nucleus tables</h2>
<p>The ‘nucleus centroid’ of a cell is unlikely to change with proofreading, and so is a useful static identifier for a given cell. The results of automatic nucleus segmentation and neuron-detection are avialable in the following tables. These tables are often the ‘reference’ table for other annotations.</p>
<section id="nucleus-detection-table" class="level3">
<h3 class="anchored" data-anchor-id="nucleus-detection-table">Nucleus Detection Table</h3>
<p>Table name: <code>nucleus_detection_v0</code></p>
<p>Nucleus detection has been used to define unique cells in the dataset. Distinct from the neuronal segmentation, a convolutional neural network was trained to segment nuclei. Each nucleus detection was given a unique ID, and the centroid of the nucleus was recorded as well as its volume. Many other tables in the dataset are reference tables on <code>nucleus_detection_v0</code>, meaning they are linked by the same annotation id. The id of the segmented nucelus, a 6-digit integer, is static across data versions and for this reason is the preferred method to identify the same ‘cell’ across time.</p>
<p>The key columns of <code>nucleus_detection_v0</code> are:</p>
<table class="table-light table-hover caption-top table">
<caption>Nucleus table column definitions</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">6-digit number of the segmentation for that nucleus; ‘nucleus ID’</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the nucleus</td>
</tr>
</tbody>
</table>
<p>Note that the <code>id</code> column is the nucleus ID, also called the ‘soma ID’ or the ‘cell ID’.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'nucleus_detection_v0'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.nucleus_detection_v0(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="nucleus-brain-area-assignment" class="level3">
<h3 class="anchored" data-anchor-id="nucleus-brain-area-assignment">Nucleus brain area assignment</h3>
<p>Table name: <code>nucleus_functional_area_assignment</code></p>
<p>Given the nucleus detection table <code>nucleus_detection_v0</code> and the transformation of 2-photon <em>in vivo</em> imaging to the EM structural space (see <a href="../annotation-tables.html#functional-coregistration-tables">functional-coregistration-tables</a> ), each cell in the volume has been assigned to one of four visual cortical areas.</p>
<p>The inferred functional brain area based on the position of the nucleus in the EM volume. Area boundaries estimated from the area-membership assignments of the 2P recorded cells, after transformation to EM space.</p>
<p>The table <code>nucleus_functional_area_assignment</code> is a reference table on <code>nucleus_detection_v0</code> and adds the following columns:</p>
<table class="table-light table-hover caption-top table">
<caption>Functional area assignment</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>target_id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>tag</code></td>
<td style="text-align: left;">the brain area label (one of V1, AL, RL, LM)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>value</code></td>
<td style="text-align: left;">the distance to the area boundary (in um), calculated as the mean-distance of the 10 nearest neighbors in a non-matching brain area. A larger value is further from the area boundaries, and can be interpretted as higher confidence in area assignment.</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'nucleus_functional_area_assignment'</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.nucleus_functional_area_assignment(tag<span class="op">=</span><span class="st">'V1'</span>).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Neuron-Nucleus Table
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This table is superseded by other cell typing below, but remains here for convenient reference as it is relevant to other tables such as <code>aibs_metamodel_celltypes_v661</code>.</p>
</div>
</div>
<p>Table name: <code>nucleus_ref_neuron_svm</code></p>
<p>While the table of centroids for all nuclei is <code>nucleus_detection_v0</code>, this includes neuronal nuclei, non-neuronal nuclei, and some erroneous detections. The table <code>nucleus_ref_neuron_svm</code> shows the results of a classifier that was trained to distinguish neuronal nuclei from non-neuronal nuclei and errors. For the purposes of analysis, we recommend using the <code>nucleus_ref_neuron_svm</code> table to get the most broad collection of neurons in the dataset.</p>
<p>The key columns of <code>nucleus_ref_neuron_svm</code> are:</p>
<table class="table-light table-hover caption-top table">
<caption>Nucleus table column definitions</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>classification-system</code></td>
<td style="text-align: left;">Describes how the classification was done. All values will be <code>is_neuron</code> for this table</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cell_type</code></td>
<td style="text-align: left;">The output of the classifier. All values will be either <code>neuron</code> or <code>not-neuron</code> (glia or error) for this table</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'nucleus_ref_neuron_svm'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.nucleus_ref_neuron_svm(target_id<span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="cell-type-tables" class="level2">
<h2 class="anchored" data-anchor-id="cell-type-tables">Cell Type Tables</h2>
<p>There are several tables that contain information about the cell type of neurons in the dataset, with each table representing a different method of doing the classificaiton. Because each method requires a different kind of information, not all cells are present in all tables. Each of the cell types tables has the same format and in all cases the <code>id</code> column references the nucleus id of the cell in question.</p>
<section id="manual-cell-types-v1-column" class="level3">
<h3 class="anchored" data-anchor-id="manual-cell-types-v1-column">Manual Cell Types (V1 Column)</h3>
<p>Table name: <code>allen_v1_column_types_slanted_ref</code></p>
<p>A subset of nucleus detections in a 100 um column (n=2204) in VISp were manually classified by anatomists at the Allen Institute into categories of cell subclasses, first distinguishing cells into classes of non-neuronal, excitatory and inhibitory; then into subclasses.</p>
<p>For the non-neuronal subclasses, see <code>aibs_column_nonneuronal_ref</code></p>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>AIBS Manual Cell Types, V1 Column</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the cell nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>classification-system</code></td>
<td style="text-align: left;">One of <code>aibs_coarse_excitatory</code> or <code>aibs_coarse_inhibitory</code> for detected neurons, or <code>aibs_coarse_nonneuronal</code> for non-neurons (glia/pericytes).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cell_type</code></td>
<td style="text-align: left;">One of several cell types, detailed below</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<p>The cell types in the table are:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Manual Cell Types (neurons)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<table class="table-light table-hover caption-top table">
<caption>AIBS Manual Cell Type definitions (neurons)</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Cell Type</th>
<th style="text-align: left;">Subclass</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>23P</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 2/3 cells</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>4P</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 4 cells</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>5P-IT</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 5 <strong>i</strong>ntra<strong>t</strong>elencephalic cells</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>5P-ET</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 5 <strong>e</strong>xtra<strong>t</strong>elencephalic cells</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>5P-NP</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 5 near-projecting cells</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>6P-IT</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 6 <strong>i</strong>ntra<strong>t</strong>elencephalic cells</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>6P-CT</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 6 <strong>c</strong>ortico<strong>t</strong>halamic cells</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>BC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Basket cell</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>BPC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Bipolar cell. <em>In practice, this was used for all cells thought to be VIP cell, not only those with a bipolar dendrite</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>MC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Martinotti cell. <em>In practice, this label was used for all inhibitory neurons that appeared to be Somatostatin cell, not only those with a Martinotti cell morphology</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Unsure</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Unsure. <em>In practice, this label also is used for all likely-inhibitory neurons that did not match other types</em></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'allen_v1_column_types_slanted_ref'</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.allen_v1_column_types_slanted_ref(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Manual Cell Types (non-neurons)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<table class="table-light table-hover caption-top table">
<caption>AIBS Manual Cell Type definitions (non-neurons)</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Cell Type</th>
<th style="text-align: left;">Subclass</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>OPC</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Oligodendrocyte precursor cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>astrocyte</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Astrocyte</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>microglia</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Microglia</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pericyte</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Pericyte</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>oligo</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Oligodendrocyte</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'aibs_column_nonneuronal_ref'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.aibs_column_nonneuronal_ref(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="predictions-from-somanucleus-features" class="level3">
<h3 class="anchored" data-anchor-id="predictions-from-somanucleus-features">Predictions from soma/nucleus features</h3>
<p>Table name: <code>aibs_metamodel_celltypes_v661</code></p>
<p>This table contains the results of a hierarchical classifier trained on features of the cell body and nucleus of cells. This was applied to most cells in the dataset that had complete cell bodies (e.g.&nbsp;not cut off by the edge of the data), detected by <code>nucleus_detection_v0</code>, with small-objects and multi-soma errors removed. The model was run with cell-based features as of version 661 of the dataset. For more details, see <span class="citation" data-cites="elabbady_perisomatic_2022">(<a href="#ref-elabbady_perisomatic_2022" role="doc-biblioref">Elabbady et al. 2022</a>)</span>. In general, this does a good job, but sometimes confuses layer 5 inhibitory neurons as being excitatory:</p>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>AIBS Soma Nuc Metamodel Table</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the cell nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>classification-system</code></td>
<td style="text-align: left;">One of <code>excitatory_neuron</code> or <code>inhibitory_neuron</code> for detected neurons, or <code>nonneuron</code> for non-neurons (glia/pericytes).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cell_type</code></td>
<td style="text-align: left;">One of several cell types, detailed below</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<p>The cell types in the table are:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Soma Nuc Metamodel Cell types
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<table class="table-light table-hover caption-top table">
<caption>AIBS Soma Nuc Metamodel: Cell Type definitions</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Cell Type</th>
<th style="text-align: left;">Subclass</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>23P</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 2/3 cells</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>4P</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 4 cells</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>5P-IT</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 5 <strong>i</strong>ntra<strong>t</strong>elencephalic cells</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>5P-ET</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 5 <strong>e</strong>xtra<strong>t</strong>elencephalic cells</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>5P-NP</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 5 near-projecting cells</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>6P-IT</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 6 <strong>i</strong>ntra<strong>t</strong>elencephalic cells</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>6P-CT</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Layer 6 <strong>c</strong>ortico<strong>t</strong>halamic cells</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>BC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Basket cell</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>BPC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Bipolar cell. <em>In practice, this was used for all cells thought to be VIP cell, not only those with a bipolar dendrite</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>MC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Martinotti cell. <em>In practice, this label was used for all inhibitory neurons that appeared to be Somatostatin cell, not only those with a Martinotti cell morphology</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>NGC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Neurogliaform cell. <em>In practice, this label also is used for all inhibitory neurons in layer 1, many of which may not be neurogliaform cells although they might be in the same molecular family</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>OPC</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Oligodendrocyte precursor cell</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>astrocyte</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Astrocyte</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>microglia</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Microglia</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>pericyte</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Pericyte</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>oligo</code></td>
<td style="text-align: left;">Non-neuronal</td>
<td style="text-align: left;">Oligodendrocyte</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'aibs_metamodel_celltypes_v661'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.aibs_metamodel_celltypes_v661(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Previous versions of this table include: <code>aibs_soma_nuc_metamodel_preds_v117</code> (run on a subset of data, the V1 column) and <code>aibs_soma_nuc_exc_mtype_preds_v117</code> (using training data labeled by another classifier: see <code>mtypes</code> below).</p>
</section>
<section id="coarse-prediction-from-spine-detection" class="level3">
<h3 class="anchored" data-anchor-id="coarse-prediction-from-spine-detection">Coarse prediction from spine detection</h3>
<p>Table name: <code>baylor_log_reg_cell_type_coarse_v1</code></p>
<p>This table contains the results of a logistic regression classifier trained on properties of neuronal dendrites. This was applied to many cells in the dataset, but required more data than soma and nucleus features alone and thus more cells did not complete the pipeline. It has very good performance on excitatory vs inhibitory neurons because it focuses on dendritic spines, a characteristic property of excitatory neurons. It is a good table to double check E/I classifications if in doubt.</p>
<p>For details, see <span class="citation" data-cites="celii_neurd_2023">(<a href="#ref-celii_neurd_2023" role="doc-biblioref">Celii et al. 2023</a>)</span>.</p>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>Baylor Dendrite Feature Table</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the cell nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>classification-system</code></td>
<td style="text-align: left;"><code>baylor_log_reg_cell_type_coarse</code> for all entries</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cell_type</code></td>
<td style="text-align: left;"><code>excitatory</code> or <code>inhibitory</code></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'baylor_log_reg_cell_type_coarse_v1'</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.baylor_log_reg_cell_type_coarse_v1(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="fine-prediction-from-dendritic-features" class="level3">
<h3 class="anchored" data-anchor-id="fine-prediction-from-dendritic-features">Fine prediction from dendritic features</h3>
<p>Table name: <code>aibs_metamodel_mtypes_v661_v2</code></p>
<p>Excitatory neurons and inhibitory neurons were distinguished with the soma-nucleus model <span class="citation" data-cites="elabbady_perisomatic_2022">(<a href="#ref-elabbady_perisomatic_2022" role="doc-biblioref">Elabbady et al. 2022</a>)</span>, and subclasses were assigned based on a data-driven clustering of the neuronal features. Inhibitory neurons were classified based on how they distributed they synaptic outputs onto target cells, while exictatory neurons were classified based on a collection of dendritic features.</p>
<p>This was applied to most detected neurons in the dataset that had complete cell bodies (e.g.&nbsp;not cut off by the edge of the data), detected by <code>nucleus_detection_v0</code>, with small-objects and multi-soma errors removed. The model was run with cell-based features as of version 661 of the dataset.For more details, see <span class="citation" data-cites="schneider-mizell2023">(<a href="#ref-schneider-mizell2023" role="doc-biblioref">Schneider-Mizell et al. 2023</a>)</span>.</p>
<p>Note that all cell-type labels in this table come from a clustering specific to this paper, and while they are intended to align with the broader literature they are not a direct mapping or a well-established convention.</p>
<p>For a more conventional set of labels on the same set of cells, look at the manual table <code>allen_v1_column_types_slanted_ref</code>. Cell types in that table align with those in the <code>aibs_metamodel_celltypes_v661</code>.</p>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>Allen Motif-type (mtype) Table</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the cell nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>classification-system</code></td>
<td style="text-align: left;"><code>excitatory</code> or <code>inhibitory</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cell_type</code></td>
<td style="text-align: left;">One of several cell types, detailed below</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<p>The cell types in the table are:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
M-type Cell Type definitions
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Cell Type</th>
<th style="text-align: left;">Subclass</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>L2a</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 2 (upper layer 2/3) excitatory neurons</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L2b</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 2 (upper layer 2/3) excitatory neurons</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>L3a</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of excitatory neurons transitioning between upper and lower layer 2/3</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L3b</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 3 (upper layer 2/3) excitatory neurons</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>L3c</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 3 (upper layer 2/3) excitatory neurons</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L4a</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">The largest cluster of layer 4 excitatory neurons</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>L4b</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">Another cluster of layer 4 excitatory neurons</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L4c</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 4 excitatory neurons along the border with layer 5</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>L5a</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 5 IT neurons at the top of layer 5</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L5b</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 5 IT neurons throughout layer 5</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>L5ET</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">The cluster of layer 5 ET neurons</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L5NP</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">The cluster of layer 5 NP neurons</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>L6a</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 6 IT neurons at the top of layer 6</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L6b</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 6 IT neurons throughout layer 6. <em>Note that this is different than the label “Layer 6b” which refers to a narrow band at the border between layer 6 and white matter</em></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>L6c</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of tall layer 6 cells (unsure if IT or CT)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L6CT</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of tall layer 6 cells matching manual CT labels</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>L6wm</code></td>
<td style="text-align: left;">Excitatory</td>
<td style="text-align: left;">A cluster of layer 6 cells along the border with white matter</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>PTC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Perisomatic targeting cells, a cluster of inhibitory neurons that target the soma and proximal dendrites of excitatory neurons. Approximately corresponds to <strong>basket cell</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>DTC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Dendrite targeting cells, a cluster of inhibitory neurons that target the distal dendrites of excitatory neurons. Most <strong>SST cells</strong> would be DTC</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>STC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Sparsely targeting cells, a cluster of inhibitory neurons that don’t concentrate multiple synapses onto the same target neurons. Many <strong>neurogliaform cells</strong> and layer 1 interneurons fall into this category</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>ITC</code></td>
<td style="text-align: left;">Inhibitory</td>
<td style="text-align: left;">Inhibitory targeting cells, a cluster of inhibitory neurons that preferntially target other inhibitory neurons. Most <strong>VIP cells</strong> would be ITCs</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'aibs_metamodel_mtypes_v661_v2'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.aibs_metamodel_mtypes_v661_v2(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Previous versions of this table include: <code>allen_column_mtypes_v1</code> (run on a subset of data, the V1 column)</p>
</section>
</section>
<section id="proofreading-tables" class="level2">
<h2 class="anchored" data-anchor-id="proofreading-tables">Proofreading Tables</h2>
<section id="proofreading-status-and-strategy" class="level3">
<h3 class="anchored" data-anchor-id="proofreading-status-and-strategy">Proofreading Status and Strategy</h3>
<p>Table name: <code>proofreading_status_and_strategy</code></p>
<p>The table <code>proofreading_status_and_strategy</code> describes the status of cells that have undergone manual proofreading.</p>
<p>Because of the inherent difference in the difficulty and time required for different kinds of proofreading, we describe the status of axons and dendrites separately.</p>
<p>Each compartment <code>status</code> may be either:</p>
<ul>
<li><code>FALSE</code>: indicates no comprehensive proofreading has been performed, or is not applicable.<br>
</li>
<li><code>TRUE</code>: indicates that false merges have been comprehensively removed, and the compartment is at least ‘clean’. Consult the <code>strategy</code> column if completeness of the compartment is relevant to your research.</li>
</ul>
<p>An axon or dendrite labeled as <code>status=TRUE</code> can be trusted to be correct, but may not be complete. The degree of completion can be read from the <code>strategy</code> column. For more information, please see <a href="../em_03_proofreading.html">Proofreading and Data Quality</a>; or also the <a href="https://www.microns-explorer.org/manifests/mm3-proofreading">microns-explorer page on proofreading strategies</a>.</p>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>Proofreading Status Table</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the cell nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>valid_id</code></td>
<td style="text-align: left;">The root id of the neuron when it the proofreading assessment was made. <em>NOTE: if this does not match the <code>pt_root_id</code> then the cell has undergone further changes. This is usually and improvement in proofreading, but proceed with caution.</em></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>status_dendrite</code></td>
<td style="text-align: left;">The status of the dendrite proofreading. May be <code>TRUE</code> or <code>FALSE</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>status_axon</code></td>
<td style="text-align: left;">The status of the axon proofreading. May be <code>TRUE</code> or <code>FALSE</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>strategy_dendrite</code></td>
<td style="text-align: left;">The strategy employed to proofread the dendrite. See strategy table below for details</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>strategy_axon</code></td>
<td style="text-align: left;">The strategy employed to proofread the axon. See strategy table below for details</td>
</tr>
</tbody>
</table>
<p>The specific strategies are as follows (and will update over time):</p>
<section id="proofreading-strategies" class="level4">
<h4 class="anchored" data-anchor-id="proofreading-strategies">Proofreading Strategies</h4>
<table class="table-light table-hover caption-top table">
<caption>Proofreading Strategy Table</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Strategy</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>none</code></td>
<td style="text-align: left;">No cleaning, and no extension. Indicates an entry in <code>proofreading_status</code> that is <code>FALSE</code> for that compartment</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>dendrite_clean</code></td>
<td style="text-align: left;">The dendrite had incorrectly-merged axon and dendritic segments comprehensively removed, meaning the input synapses are accurate. The dendrite may be incorrectly truncated by segmentation error. Not all dendrite tips have been checked for extension. No comprehensive attempt was made to re-attach spine heads.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>dendrite_extended</code></td>
<td style="text-align: left;">The dendrite had incorrectly-merged axon and dendritic segments comprehensively removed, meaning the input synapses are accurate. Every tip was identified, manually inspected, and extended if possible. No comprehensive attempt was made to re-attach spine heads.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>axon_column_truncated</code></td>
<td style="text-align: left;">AThe axon was extended within the V1 cortical column, with a preference for local connections. In some cases the axon was cut at the column boundary and/or the layer boundary, especially the boundary between layers 2/3 and layer 4. Output synapses represent a sampling of potential partners</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>axon_interareal</code></td>
<td style="text-align: left;">The axon was extended with a preference for branches that projected to other brain areas. Some axon branches were fully extended, but local connections may be incomplete. Output synapses represent a sampling of potential partners.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>axon_partially_extended</code></td>
<td style="text-align: left;">The axon was extended outward from the soma, following each branch to its termination. Output synapses represent a sampling of potential partners.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>axon_fully_extended</code></td>
<td style="text-align: left;">Axon was extended outward from the soma, following each branch to its termination. After initial extension, every endpoint was identified, manually inspected, and extended again if possible. Output synapses represent a largely complete sampling of partners.</td>
</tr>
</tbody>
</table>
<p>This table, <code>proofreading_status_and_strategy</code>, supercedes <code>proofreading_status_public_release</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'proofreading_status_and_strategy'</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.proofreading_status_and_strategy(status_axon<span class="op">=</span><span class="st">'t'</span>).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Proofreading status at public release
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This table is out-of-date, and remains here for convenient reference</p>
</div>
</div>
<p>Table name: <code>proofreading_status_public_release</code></p>
<p>The table <code>proofreading_status_public_release</code> describes the status of cells selected for manual proofreading.</p>
<p>Because of the inherent difference in the challenge and time required for different kinds of proofreading, we describe the status of axons and dendrites separately. Further, we distinguish three different categories of proofreading:</p>
<ul>
<li><code>non</code>: No proofreading has been comprehensively performed.</li>
<li><code>clean</code>: Proofreading has comprehensively removed false merges, but not necessarily added missing parts.</li>
<li><code>extended</code>: Proofreading has comprehensively removed false merges and attempted to add all or most missing parts.</li>
</ul>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>Proofreading Status Table</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the cell nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>valid_id</code></td>
<td style="text-align: left;">The root id of the neuron when it the proofreading assessment was made</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>status_dendrite</code></td>
<td style="text-align: left;">The status of the dendrite proofreading. One of the three categories described above</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>status_axon</code></td>
<td style="text-align: left;">The status of the axon proofreading. One of the three categories described above</td>
</tr>
</tbody>
</table>
<p>This table, <code>proofreading_status_public_release</code>, is superceded by <code>proofreading_status_and_strategy</code> and will be deprecated.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set version to 1078 or before</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>client.version <span class="op">=</span> <span class="dv">1078</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'proofreading_status_public_release'</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.proofreading_status_public_release(status_axon<span class="op">=</span><span class="st">'extended'</span>).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="functional-coregistration-tables" class="level2">
<h2 class="anchored" data-anchor-id="functional-coregistration-tables">Functional Coregistration Tables</h2>
<p>To relate the structural data to functional data, cell bodies must be coregistered between the functional imaging and EM volumes. As with cell-typing, there are <strong>manual</strong> and <strong>automated</strong> methods for doing this, with the former having higher accuracy but lower throughput.</p>
<ul>
<li><code>coregistration_manual_v4</code> : The results of manually verified coregistration. This table is well-verified, but contains fewer <code>ROI</code>s (N=15,352 root ids, 19,181 ROIs).</li>
<li><code>coregistration_auto_phase3_fwd_apl_vess_combined_v2</code> : The results of automated functional matching between the EM and 2-p functional data. This table is not manually verified, but contains more <code>ROI</code>s (N=35,466 root ids, N=83,046 ROIs).</li>
</ul>
<section id="manual-coregistration" class="level3">
<h3 class="anchored" data-anchor-id="manual-coregistration">Manual coregistration</h3>
<p>Table name: <code>coregistration_manual_v4</code></p>
<p>A table of EM nucleus centroids manually matched to Baylor functional units. A unique functional unit is identified by its session, scan_idx and unit_id. An EM nucleus centroid may have matched to more than one functional unit if it was scanned on more than one imaging field.</p>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>Coregistration table</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the cell nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>session</code></td>
<td style="text-align: left;">The session index from functional imaging</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>scan_idx</code></td>
<td style="text-align: left;">The scan index from functional imaging</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>unit_id</code></td>
<td style="text-align: left;">The functional unit index from imaging. Only unique within scan and session</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>field</code></td>
<td style="text-align: left;">The field index from functional imaging</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>residual</code></td>
<td style="text-align: left;">The residual distance between the functional and the assigned structural points after transformation, in microns</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>score</code></td>
<td style="text-align: left;">A separation score, measuring the difference between the residual distance to the assigned neuron and the distance to the nearest non-assigned neuron, in microns. <em>This can be negative if the non-assigned neuron is closer than the assigned neuron. Larger values indicate fewer nearby neurons that could be confused with the assigned neuron.</em></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This table includes duplicate entries for the same ‘pt_root_id’ and nucleus id if the coregistered cell has multiple unit recordings</p>
</div>
</div>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'coregistration_manual_v4'</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.coregistration_manual_v4(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This table <code>coregistration_manual_v4</code> supercedes previous iterations of this table:</p>
<ul>
<li><code>coregistration_manual_v3</code></li>
<li><code>coregistration_manual</code></li>
</ul>
</section>
<section id="automated-coregistration" class="level3">
<h3 class="anchored" data-anchor-id="automated-coregistration">Automated coregistration</h3>
<p>Table name: <code>coregistration_auto_phase3_fwd_apl_vess_combined_v2</code></p>
<p>A table of EM nucleus centroids automatically matched to Baylor functional units. This table reconciles the following two tables that both make a best match of the of registration using different techniques: <code>coregistration_auto_phase3_fwd_v2</code> and <code>apl_functional_coreg_vess_fwd</code>. A unique functional unit is identified by its session, scan_idx and unit_id. An EM nucleus centroid may have matched to more than one functional unit if it was scanned on more than one imaging field.</p>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>Coregistration table</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the cell nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>session</code></td>
<td style="text-align: left;">The session index from functional imaging</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>scan_idx</code></td>
<td style="text-align: left;">The scan index from functional imaging</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>unit_id</code></td>
<td style="text-align: left;">The functional unit index from imaging. Only unique within scan and session</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>field</code></td>
<td style="text-align: left;">The field index from functional imaging</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>residual</code></td>
<td style="text-align: left;">The residual distance between the functional and the assigned structural points after transformation, in microns</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>score</code></td>
<td style="text-align: left;">A separation score, measuring the difference between the residual distance to the assigned neuron and the distance to the nearest non-assigned neuron, in microns. <em>This can be negative if the non-assigned neuron is closer than the assigned neuron. Larger values indicate fewer nearby neurons that could be confused with the assigned neuron.</em></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This table includes duplicate entries for the same <code>pt_root_id</code> and nucleus id if the coregistered cell has multiple unit recordings</p>
</div>
</div>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'coregistration_auto_phase3_fwd_apl_vess_combined_v2'</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.coregistration_auto_phase3_fwd_apl_vess_combined_v2(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This table <code>coregistration_auto_phase3_fwd_apl_vess_combined_v2</code> supercedes previous iterations of this table:</p>
<ul>
<li><code>coregistration_auto_phase3_fwd_apl_vess_combined_v2</code></li>
<li><code>apl_functional_coreg_forward_v5</code></li>
</ul>
</section>
<section id="functional-properties" class="level3">
<h3 class="anchored" data-anchor-id="functional-properties">Functional properties</h3>
<p>Table name: <code>functional_properties_v3_bcm</code></p>
<p>A summary of the functional properties for each of the coregistered neurons (as of <code>coregistration_manual_v3</code>). For details, see <span class="citation" data-cites="ding_functional_2023">(<a href="#ref-ding_functional_2023" role="doc-biblioref">Ding et al. 2023</a>)</span></p>
<p>The key columns are:</p>
<table class="table-light table-hover caption-top table">
<caption>Fuctional properties of coregistered neurons</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>target_id</code></td>
<td style="text-align: left;">Soma ID for the cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pt_position</code> &nbsp;<code>pt_supervoxel_id</code> &nbsp;<code>pt_root_id</code></td>
<td style="text-align: left;">Bound spatial point columns associated with the centroid of the nucleus</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>session</code></td>
<td style="text-align: left;">The session index from functional imaging</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>scan_idx</code></td>
<td style="text-align: left;">The scan index from functional imaging</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>unit_id</code></td>
<td style="text-align: left;">The functional unit index from imaging. Only unique within scan and session</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>pref_ori</code></td>
<td style="text-align: left;">preferred orientation in radians (0 - pi), horizontal bar moving upward is 0 and orientation increases clockwise, extracted from model responses to oriented noise stimuli</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>pref_dir</code></td>
<td style="text-align: left;">preferred direction in radians (0 - 2pi), horizontal bar moving upward is 0 and orientation increases clockwise, extracted from model responses to oriented noise stimuli</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>gOSI</code></td>
<td style="text-align: left;">global orientation selectivity index</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>gDSI</code></td>
<td style="text-align: left;">global direction selectivity index</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cc_abs</code></td>
<td style="text-align: left;">prediction performance of the model, higher is better</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a reference table on <code>nucleus_detection_v0</code>, and can be indexed by the same nucleus id.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This table includes duplicate entries for the same ‘pt_root_id’ and nucleus id if the coregistered cell has multiple unit recordings</p>
</div>
</div>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard query</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>client.materialize.query_table(<span class="st">'functional_properties_v3_bcm'</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Content-aware query</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>client.materialize.tables.functional_properties_v3_bcm(<span class="bu">id</span><span class="op">=</span>example_nucleus_id).query()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="overview-of-relevant-tables" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-relevant-tables">Overview of relevant tables</h2>
<table class="table-light table-hover caption-top table">
<caption>heard you like tables–here’s a table for your tables</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Table Name</th>
<th style="text-align: left;">Number of Annotations</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>synapses_pni_v2</code></td>
<td style="text-align: left;">337,312,429</td>
<td style="text-align: left;">The locations of synapses and the segment ids of the pre and post-synaptic automated synapse detection</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>nucleus_detection_v0</code></td>
<td style="text-align: left;">144,120</td>
<td style="text-align: left;">The locations of nuclei detected via a fully automated method</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>nucleus_alternative_points</code></td>
<td style="text-align: left;">8,388</td>
<td style="text-align: left;">A reference annotation table marking alternative segment_id lookup locations for a subset of nuclei in nucleus_detection_v0 that is more accurate than the centroid location listed there</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>nucleus_ref_neuron_svm</code></td>
<td style="text-align: left;">144,120</td>
<td style="text-align: left;">reference annotation indicating the output of a model detecting which nucleus detections are neurons versus which are not 1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>coregistration_manual_v4</code></td>
<td style="text-align: left;">19,181</td>
<td style="text-align: left;">A table indicating the association between individual units in the functional imaging data and nuclei in the structural data, derived from human powered matching. Includes residual and separation scores to help assess confidence</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>coregistration_auto_phase3_fwd_apl_vess_combined_v2</code></td>
<td style="text-align: left;">83,046</td>
<td style="text-align: left;">A table indicating the association between individual units in the functional imaging data and nuclei in the structural data, derived from the automated procedure. Includes residuals and separation scores to help assess confidence</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>proofreading_status_and_strategy</code></td>
<td style="text-align: left;">1865</td>
<td style="text-align: left;">A table indicating which neurons have been proofread on their axons or dendrites</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>aibs_column_nonneuronal_ref</code></td>
<td style="text-align: left;">542</td>
<td style="text-align: left;">Cell type reference annotations from a human expert of non-neuronal cells located amongst the Minnie Column</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>allen_v1_column_types_slanted_ref</code></td>
<td style="text-align: left;">1,357</td>
<td style="text-align: left;">Neuron cell type reference annotations from human experts of neuronal cells located amongst the Minnie Column</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>allen_column_mtypes_v1</code></td>
<td style="text-align: left;">1,357</td>
<td style="text-align: left;">Neuron cell type reference annotations from data driven unsupervised clustering of neuronal cells</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>aibs_metamodel_mtypes_v661_v2</code></td>
<td style="text-align: left;">72,158</td>
<td style="text-align: left;">Reference annotations indicating the output of a model predicting cell types across the dataset based on the labels from allen_column_mtypes_v1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>aibs_metamodel_celltypes_v661</code></td>
<td style="text-align: left;">94,014</td>
<td style="text-align: left;">Reference annotations indicating the output of a model predicting cell classes based on the labels from allen_v1_column_types_slanted_ref and aibs_column_nonneuronal_ref</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>baylor_log_reg_cell_type_coarse_v1</code></td>
<td style="text-align: left;">55,063</td>
<td style="text-align: left;">Reference annotations indicated the output of a logistic regression model predicting whether the nucleus is part of an excitatory or inhibitory cell</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>baylor_gnn_cell_type_fine_model_v2</code></td>
<td style="text-align: left;">49,051</td>
<td style="text-align: left;">Reference annotations indicated the output of a graph neural network model predicting the cell type based on the human labels in allen_v1_column_types_slanted_ref</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>vortex_astrocyte_proofreading_status</code></td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">This table reports the status of a manually selected subset of astrocytes within the VISP column. Astrocyte seelection and proofreading performed as part of VORTEX.</td>
</tr>
</tbody>
</table>



</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-celii_neurd_2023" class="csl-entry" role="listitem">
Celii, Brendan, Stelios Papadopoulos, Zhuokun Ding, Paul G. Fahey, Eric Wang, Christos Papadopoulos, Alexander B. Kunin, et al. 2023. <span>“<span>NEURD</span> Offers Automated Proofreading and Feature Extraction for Connectomics.”</span> <a href="https://doi.org/10.1101/2023.03.14.532674">https://doi.org/10.1101/2023.03.14.532674</a>.
</div>
<div id="ref-ding_functional_2023" class="csl-entry" role="listitem">
Ding, Zhuokun, Paul G. Fahey, Stelios Papadopoulos, Eric Y. Wang, Brendan Celii, Christos Papadopoulos, Andersen Chang, et al. 2023. <span>“Functional Connectomics Reveals General Wiring Rule in Mouse Visual Cortex.”</span> <a href="https://doi.org/10.1101/2023.03.13.531369">https://doi.org/10.1101/2023.03.13.531369</a>.
</div>
<div id="ref-elabbady_perisomatic_2022" class="csl-entry" role="listitem">
Elabbady, Leila, Sharmishtaa Seshamani, Shang Mu, Gayathri Mahalingam, Casey Schneider-Mizell, Agnes L Bodor, J. Alexander Bae, et al. 2022. <span>“Perisomatic Features Enable Efficient and Dataset Wide Cell-Type Classifications Across Large-Scale Electron Microscopy Volumes.”</span> <a href="https://doi.org/10.1101/2022.07.20.499976">https://doi.org/10.1101/2022.07.20.499976</a>.
</div>
<div id="ref-schneider-mizell2023" class="csl-entry" role="listitem">
Schneider-Mizell, Casey M, Agnes L. Bodor, Derrick Brittain, JoAnn Buchanan, Daniel J. Bumbarger, Leila Elabbady, Clare Gamlin, et al. 2023. <span>“Cell-Type-Specific Inhibitory Circuitry from a Connectomic Census of Mouse Visual Cortex.”</span> <a href="https://doi.org/10.1101/2023.01.23.525290">https://doi.org/10.1101/2023.01.23.525290</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/AllenInstitute\.github\.io\/microns_tutorial\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Contributions by: Bethanny Danskin, Ben Pedigo, Casey Schneider-Mizell, Forrest Collman, Leila Elabbady, Sven Dorkenwald</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.dev/AllenInstitute/microns_tutorial/blob/main/tutorial_book/annotation-tables.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/AllenInstitute/microns_tutorial/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>