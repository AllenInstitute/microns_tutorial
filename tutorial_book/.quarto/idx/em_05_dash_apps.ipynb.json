{"title":"Dash Apps","markdown":{"yaml":{"title":"Dash Apps","format":{"html":{"toc":true}},"bibliography":"references.bib"},"headingText":"Table Viewer","containsRefs":false,"markdown":"\n\nWe have created two webapps to help explore and visualize the data.\n\nThese apps were created using the [Dash](https://plotly.com/dash/) framework, hence the name.\n\n\nThe [**Table Viewer**](https://minnie.microns-daf.com/dash/datastack/minnie65_public/apps/table_viewer/?datastack=%22minnie65_public%22) app allows you to query individual tables in the database, filter them, and visualize the results in Neuroglancer.\n\n![Table viewer input options](img/table-viewer.png)\n\n\nIn the Table Viewer, you first select one of the tables from a dropdown in the upper left side.\n\nThe `Live Query` option is not relevent for the public data.\n\nFilter options allow you to limit the query to a subset of the data, if desired.\nNote that filtering can occur in the tables afterward as well.\n\nThe `Cell IDs` field lets you put in one or more root IDs, cell IDs (i.e. \"Nucleus ID\"), or IDs from the annotation table being queried.\nNote that if you use this option, you havet to set the dropdown to the appropriate ID type.\n\nThe `Value Search` field lets you search for a particular value, such as a specific cell type.\n\nOnce you have selected your table and set any pre-query filters, click the `Submit` button to run the query.\nWhen the query is done, a green bar will appear below the query input stating that it's showing the state of the table you queried.\n\nThe first set of controls allow you to build a Neuroglancer link for the whole table using the \"Generate Link\" button.\n\nOptionally, if you would like to make a link where different values of a given column — example, different cell types — are shown in different layers, you can turn on the \"Group Annotations\" toggle on the right and select the column you want to use for groupings.\n\nAfter setting these controls, click the \"Generate Link\" button to create the Neuroglancer link.\n\n![Table viewer query results.](img/table-viewer-table.png)\n\nThe table itself is shown below the controls.\nYou can sort the table by clicking on the column headers, and filter the table by typing in the filter box below the column headers.  \n\nFor example, if you want to find only cells with cell type \"5P-NP\" in a cell type column, simply type `5P-NP` in the box under the column header. Similarly, to find only cells whose nucleus volume is greater than 500, type `>500` in the box under the `volume` column header in a table with nucleus information.\n\nIn addition, individual rows can be selected by clicking on the checkbox to the left of the row.\n\nThe left button along the top is a Neuroglancer link specific to the selected rows, if present, or the table as filtered if no rows are selected.\n\nThe orange button will deselect all checkboxes, and the \"Export to CSV\" will download the table as filtered to a CSV.\n\n::: {.callout-warning}\nIf the table is too large (well beyond 10,000 rows), there are too many annotations to show in Neuroglancer and no link will be automatically generated.\n:::\n\n## Connectivity and Cell Type Viewer\n\nThe other tool is the [**Connectivity Viewer**](https://minnie.microns-daf.com/dash/datastack/minnie65_public/apps/connectivity/?datastack=%22minnie65_public%22), which is designed to let you glance at the synaptic output or input of a given cell and group connectivity by cell type or other annotations.\n\n![Connectivity viewer input options.](img/connectivity-viewer-top.png)\n\nAlong the top, you can enter an ID (either a root ID or a cell ID) and, optionally, a table to use to define cell types for synaptic partners.\n::: {.callout-note}\nNote that if you want to use cell IDs from the annotation table, you must select the `Nucleus ID` option from the dropdown next to the entry box.\n:::\n\nThe default cell type table option, `aibs_soma_nuc_metamodel_preds_v117`, is a good all-purpose table predicting coarse cell types on as many cells as possible.\n\nThe table `aibs_metamodel_mtypes_v661_v2` is the most current version version of the cell type classification, described in [@schneider-mizell2023].\n\nPressing \"Submit\" will query the database for the cell and its synapses.\n\nOnce completed, you will see the bar under the input options turn green and report the data that it is displaying.\nFor example, if we query root id `864691135408247241` and the default cell type table, we will see the following:\n\n![](img/connectivity-viewer-success.png)\n\nImportantly, the data displayed below will match whatever is in this bar — if your query takes a long time or fails for some reason (i.e.bad internet, server error), the tables displayed might be stale.\n\nThere are two locations the resulting data is displayed, as we'll see below.\nFirst, a bar of tabs allows you to quickly visualize the data in different ways.\nSecond, the table can present synaptic partners in a more detailed way.\n\n### Visualization tabs\n\nThe first and default option in the tabs is **Tables Only** which doesn't actually show any data.\nThis is merely a placeholder to let you look directly at the tablular data below.\n\nThe next tab, **Plots** lets you visualize the synaptic output of a neuron.\n\nWe focus on synaptic output only right now, because the data quality is such that automated dendritic reconstructions are reliable, but automated axon reconstructions are not (see [Proofreading section](em_03_proofreading.html)).\nBecause of that, if a neuron has been proofread we trust the cell types of its postsynaptic partners as a group but do not trust the cell types of its presynaptic partners.\n\n![Plot view. Left, violin plot of the synaptic distribution of the queried cell. Blue/left is the distribution of the cortical depth of input synapses along, red/right is the distribution of cortical depth of synaptic outputs. Approximate layers are shown. Center, a scatterplot with a dot for each synaptic output of the queried cell that is onto a target with a unique cell body (i.e. no dendritic fragments and no cells erroneously merged into other cells). The y-axis is the depth of the synapse itself, while the x-axis is the depth of the cell body of the target neuron. If a cell body categroy is selected, the dots are colored by the cell type of the target neuron. Right, a bar plot showing of the number of synapses onto target cell types.](img/connectivity-viewer-plots.png)\n\nThese plots are designed to give you a quick overview of a cell's synaptic outputs.\n\nTo add a particularly cell type column, use the `Color by value:` dropdown below the row of plots to select a column to color by.\n\nThese plots are handled in [Plotly](https://plotly.com/python/), so you can hover over the plots to see more information, and you can click and drag to zoom in on a particular region and save by clicking on the camera icon. For the scatterplot, you can also turn on and off individual types by clicking on the legend.\n\n\nThe next tab, **Neuroglancer Links** lets you visualize the synapses of a neuron in Neuroglancer.\n\n![Neuroglancer links. From left to right: Show all synaptic inputs to the cell, show all synaptic inputs to the cell grouped into different layers by value in the associated table (e.g. cell type), show all synaptic outputs of the cell, show all synaptic outputs of the cell grouped into different layers by value in the associated table (e.g. cell type).\nBelow the dropdown specifies which column to use if grouping annotations. The `Include No Type` toggle specifies whether to show synapses with cells that have no cell type annotation in the grouped cases.](img/connectivity-viewer-ngl.png)\n\nThe Neuroglancer links generated by these buttons will span all synapses of the queried cell, and do not reflect the filtering in the table below.\nThe synapse annotations are also associated with the synaptic partners, making it easy to browse through a broad sampling of synaptic connectivity.\n\n### Connectivity Table\n\nThe table below shows a table of all synaptic partners.\n\n![Table view options.](img/connectivity-viewer-table-view.png)\n\nOne of the first things you can see in the table viewer is that it is split into two tabs, **Input** and **Output**, with the tab names for each showing the total number of synapses in each category.\n\nTo move between them, just click the tab you want.\n\nAbove the Input/Ouput tabs is a link to the Neuroglancer view of the synapses show in the table, after filtering and/or selecting a subset of rows.\n\nThe table view here is similar to in the Annotation Table Viewer described above.\nYou can sort the table by clicking column headers, filter the table using the row underneath the headers, and select individual rows.\nIf you select individual rows, the Neuroglancer link will group all synapses from each partner together, making it particularly easy to see how synaptic connectivity relates to neuronal anatomy.\n\nThe default sorting of the table is by total number of synapses, but note that both summed total synapse size (`net_size`) and average synapse size (`mean_size`) are also shown.\nThese can be particularly important values when thinking about connectivity between excitatory neurons.\n\nA CSV file of the entire table can be downloaded by clicking the \"Export to CSV\" button.\n","srcMarkdownNoYaml":"\n\nWe have created two webapps to help explore and visualize the data.\n\nThese apps were created using the [Dash](https://plotly.com/dash/) framework, hence the name.\n\n## Table Viewer\n\nThe [**Table Viewer**](https://minnie.microns-daf.com/dash/datastack/minnie65_public/apps/table_viewer/?datastack=%22minnie65_public%22) app allows you to query individual tables in the database, filter them, and visualize the results in Neuroglancer.\n\n![Table viewer input options](img/table-viewer.png)\n\n\nIn the Table Viewer, you first select one of the tables from a dropdown in the upper left side.\n\nThe `Live Query` option is not relevent for the public data.\n\nFilter options allow you to limit the query to a subset of the data, if desired.\nNote that filtering can occur in the tables afterward as well.\n\nThe `Cell IDs` field lets you put in one or more root IDs, cell IDs (i.e. \"Nucleus ID\"), or IDs from the annotation table being queried.\nNote that if you use this option, you havet to set the dropdown to the appropriate ID type.\n\nThe `Value Search` field lets you search for a particular value, such as a specific cell type.\n\nOnce you have selected your table and set any pre-query filters, click the `Submit` button to run the query.\nWhen the query is done, a green bar will appear below the query input stating that it's showing the state of the table you queried.\n\nThe first set of controls allow you to build a Neuroglancer link for the whole table using the \"Generate Link\" button.\n\nOptionally, if you would like to make a link where different values of a given column — example, different cell types — are shown in different layers, you can turn on the \"Group Annotations\" toggle on the right and select the column you want to use for groupings.\n\nAfter setting these controls, click the \"Generate Link\" button to create the Neuroglancer link.\n\n![Table viewer query results.](img/table-viewer-table.png)\n\nThe table itself is shown below the controls.\nYou can sort the table by clicking on the column headers, and filter the table by typing in the filter box below the column headers.  \n\nFor example, if you want to find only cells with cell type \"5P-NP\" in a cell type column, simply type `5P-NP` in the box under the column header. Similarly, to find only cells whose nucleus volume is greater than 500, type `>500` in the box under the `volume` column header in a table with nucleus information.\n\nIn addition, individual rows can be selected by clicking on the checkbox to the left of the row.\n\nThe left button along the top is a Neuroglancer link specific to the selected rows, if present, or the table as filtered if no rows are selected.\n\nThe orange button will deselect all checkboxes, and the \"Export to CSV\" will download the table as filtered to a CSV.\n\n::: {.callout-warning}\nIf the table is too large (well beyond 10,000 rows), there are too many annotations to show in Neuroglancer and no link will be automatically generated.\n:::\n\n## Connectivity and Cell Type Viewer\n\nThe other tool is the [**Connectivity Viewer**](https://minnie.microns-daf.com/dash/datastack/minnie65_public/apps/connectivity/?datastack=%22minnie65_public%22), which is designed to let you glance at the synaptic output or input of a given cell and group connectivity by cell type or other annotations.\n\n![Connectivity viewer input options.](img/connectivity-viewer-top.png)\n\nAlong the top, you can enter an ID (either a root ID or a cell ID) and, optionally, a table to use to define cell types for synaptic partners.\n::: {.callout-note}\nNote that if you want to use cell IDs from the annotation table, you must select the `Nucleus ID` option from the dropdown next to the entry box.\n:::\n\nThe default cell type table option, `aibs_soma_nuc_metamodel_preds_v117`, is a good all-purpose table predicting coarse cell types on as many cells as possible.\n\nThe table `aibs_metamodel_mtypes_v661_v2` is the most current version version of the cell type classification, described in [@schneider-mizell2023].\n\nPressing \"Submit\" will query the database for the cell and its synapses.\n\nOnce completed, you will see the bar under the input options turn green and report the data that it is displaying.\nFor example, if we query root id `864691135408247241` and the default cell type table, we will see the following:\n\n![](img/connectivity-viewer-success.png)\n\nImportantly, the data displayed below will match whatever is in this bar — if your query takes a long time or fails for some reason (i.e.bad internet, server error), the tables displayed might be stale.\n\nThere are two locations the resulting data is displayed, as we'll see below.\nFirst, a bar of tabs allows you to quickly visualize the data in different ways.\nSecond, the table can present synaptic partners in a more detailed way.\n\n### Visualization tabs\n\nThe first and default option in the tabs is **Tables Only** which doesn't actually show any data.\nThis is merely a placeholder to let you look directly at the tablular data below.\n\nThe next tab, **Plots** lets you visualize the synaptic output of a neuron.\n\nWe focus on synaptic output only right now, because the data quality is such that automated dendritic reconstructions are reliable, but automated axon reconstructions are not (see [Proofreading section](em_03_proofreading.html)).\nBecause of that, if a neuron has been proofread we trust the cell types of its postsynaptic partners as a group but do not trust the cell types of its presynaptic partners.\n\n![Plot view. Left, violin plot of the synaptic distribution of the queried cell. Blue/left is the distribution of the cortical depth of input synapses along, red/right is the distribution of cortical depth of synaptic outputs. Approximate layers are shown. Center, a scatterplot with a dot for each synaptic output of the queried cell that is onto a target with a unique cell body (i.e. no dendritic fragments and no cells erroneously merged into other cells). The y-axis is the depth of the synapse itself, while the x-axis is the depth of the cell body of the target neuron. If a cell body categroy is selected, the dots are colored by the cell type of the target neuron. Right, a bar plot showing of the number of synapses onto target cell types.](img/connectivity-viewer-plots.png)\n\nThese plots are designed to give you a quick overview of a cell's synaptic outputs.\n\nTo add a particularly cell type column, use the `Color by value:` dropdown below the row of plots to select a column to color by.\n\nThese plots are handled in [Plotly](https://plotly.com/python/), so you can hover over the plots to see more information, and you can click and drag to zoom in on a particular region and save by clicking on the camera icon. For the scatterplot, you can also turn on and off individual types by clicking on the legend.\n\n\nThe next tab, **Neuroglancer Links** lets you visualize the synapses of a neuron in Neuroglancer.\n\n![Neuroglancer links. From left to right: Show all synaptic inputs to the cell, show all synaptic inputs to the cell grouped into different layers by value in the associated table (e.g. cell type), show all synaptic outputs of the cell, show all synaptic outputs of the cell grouped into different layers by value in the associated table (e.g. cell type).\nBelow the dropdown specifies which column to use if grouping annotations. The `Include No Type` toggle specifies whether to show synapses with cells that have no cell type annotation in the grouped cases.](img/connectivity-viewer-ngl.png)\n\nThe Neuroglancer links generated by these buttons will span all synapses of the queried cell, and do not reflect the filtering in the table below.\nThe synapse annotations are also associated with the synaptic partners, making it easy to browse through a broad sampling of synaptic connectivity.\n\n### Connectivity Table\n\nThe table below shows a table of all synaptic partners.\n\n![Table view options.](img/connectivity-viewer-table-view.png)\n\nOne of the first things you can see in the table viewer is that it is split into two tabs, **Input** and **Output**, with the tab names for each showing the total number of synapses in each category.\n\nTo move between them, just click the tab you want.\n\nAbove the Input/Ouput tabs is a link to the Neuroglancer view of the synapses show in the table, after filtering and/or selecting a subset of rows.\n\nThe table view here is similar to in the Annotation Table Viewer described above.\nYou can sort the table by clicking column headers, filter the table using the row underneath the headers, and select individual rows.\nIf you select individual rows, the Neuroglancer link will group all synapses from each partner together, making it particularly easy to see how synaptic connectivity relates to neuronal anatomy.\n\nThe default sorting of the table is by total number of synapses, but note that both summed total synapse size (`net_size`) and average synapse size (`mean_size`) are also shown.\nThese can be particularly important values when thinking about connectivity between excitatory neurons.\n\nA CSV file of the entire table can be downloaded by clicking the \"Export to CSV\" button.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"em_05_dash_apps.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.546","theme":"cosmo","title":"Dash Apps","bibliography":["references.bib"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}